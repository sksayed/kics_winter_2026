<mxfile host="65bd71144e">
    <diagram name="System Architecture" id="system-arch">
        <mxGraphModel dx="1332" dy="769" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="400" pageHeight="550" background="#ffffff" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="layer1-label" value="Layer 1: Hybrid Settlement Anchor (On-Chain)" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="-20" y="10" width="360" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="settlement-start" value="Settlement Start" style="endArrow=classic;html=1;strokeWidth=1.3;strokeColor=#2E7D32;dashed=1;fontSize=7;align=center;verticalAlign=middle;curved=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="blockchain" target="channel" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="15" y="120"/>
                            <mxPoint x="10" y="200"/>
                        </Array>
                    </mxGeometry>
                </mxCell>
                <mxCell id="blockchain" value="Blockchain / On-Chain Settlement&#10;• Hybrid Key Exchange: HKDF(ECDHE || Kyber-768)&#10;• Dual Signature: Verify_Dilithium ∧ Verify_ECDSA&#10;• Channel Open/Close Only&#10;• Storage: 3.5 KB per settlement" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=8;align=left;verticalAlign=top;spacingLeft=3" parent="1" vertex="1">
                    <mxGeometry x="45" y="40" width="210" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="settlement-close" value="Settlement Complete" style="endArrow=classic;html=1;strokeWidth=1.3;strokeColor=#0066CC;dashed=1;fontSize=7;align=center;verticalAlign=middle;curved=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;exitX=1;exitY=0.417;exitDx=0;exitDy=0;exitPerimeter=0;" parent="1" source="channel" target="blockchain" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <Array as="points">
                            <mxPoint x="290" y="205"/>
                            <mxPoint x="310" y="120"/>
                        </Array>
                        <mxPoint x="213" y="215" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="keyex" value="Hybrid Key Exchange&#10;HKDF(ECDHE || Kyber-768)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7" parent="1" vertex="1">
                    <mxGeometry x="40" y="115" width="100" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="dualsig" value="Dual Signature&#10;Verify_Dilithium ∧ Verify_ECDSA" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;fontSize=7" parent="1" vertex="1">
                    <mxGeometry x="180" y="115" width="90" height="40" as="geometry"/>
                </mxCell>
                <mxCell id="layer2-label" value="Layer 2: Off-Chain Scaling" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=10;fontStyle=1" parent="1" vertex="1">
                    <mxGeometry x="-30" y="340" width="360" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="iot1" value="IoT A" style="ellipse;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;fontSize=8" parent="1" vertex="1">
                    <mxGeometry y="255" width="50" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="iot2" value="IoT B" style="ellipse;whiteSpace=wrap;html=1;fillColor=#f8cecc;strokeColor=#b85450;fontSize=8" parent="1" vertex="1">
                    <mxGeometry x="80" y="290" width="50" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="iot3" value="IoT C" style="ellipse;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;fontSize=8" parent="1" vertex="1">
                    <mxGeometry x="180" y="290" width="50" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="iot4" value="IoT D" style="ellipse;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=8" parent="1" vertex="1">
                    <mxGeometry x="240" y="240" width="50" height="35" as="geometry"/>
                </mxCell>
                <mxCell id="channel" value="Payment Channels&#10;• Adaptor Signatures&#10;• Hash-Based ZKP (MPC-in-the-head)&#10;• Off-chain transactions" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;fontSize=8;align=left;verticalAlign=top;spacingLeft=3" parent="1" vertex="1">
                    <mxGeometry x="80" y="215" width="140" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="edge1" value="" style="endArrow=classic;html=1;strokeWidth=1.5;strokeColor=#666666;entryX=-0.001;entryY=0.794;entryDx=0;entryDy=0;exitX=1.006;exitY=0.392;exitDx=0;exitDy=0;exitPerimeter=0;entryPerimeter=0;" parent="1" source="iot1" target="channel" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry">
                        <mxPoint x="25" y="250" as="sourcePoint"/>
                    </mxGeometry>
                </mxCell>
                <mxCell id="edge2" value="" style="endArrow=classic;html=1;strokeWidth=1.5;strokeColor=#666666;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.33;entryY=1;entryDx=0;entryDy=0;" parent="1" source="iot2" target="channel" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge3" value="" style="endArrow=classic;html=1;strokeWidth=1.5;strokeColor=#666666;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.66;entryY=1;entryDx=0;entryDy=0;" parent="1" source="iot3" target="channel" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="edge4" value="" style="endArrow=classic;html=1;strokeWidth=1.5;strokeColor=#666666;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" parent="1" source="iot4" target="channel" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="keyex-conn" value="" style="endArrow=classic;html=1;strokeWidth=1.2;strokeColor=#6c8ebf;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.25;entryY=1;entryDx=0;entryDy=0;" parent="1" source="keyex" target="blockchain" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dualsig-conn" value="" style="endArrow=classic;html=1;strokeWidth=1.2;strokeColor=#6c8ebf;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" parent="1" source="dualsig" target="blockchain" edge="1">
                    <mxGeometry width="50" height="50" relative="1" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>